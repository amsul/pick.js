<!doctype html>

<meta charset="utf-8">

<link rel="stylesheet" href="../demos/styles/main.css">
<link rel="stylesheet" href="../lib/themes/pick.base.css">
<link rel="stylesheet" href="../lib/themes/pick.drop.css">
<link rel="stylesheet" href="../lib/themes/pick.modal.css">
<link rel="stylesheet" href="../lib/themes/pick.box.css">

<body>

    <script src="../demos/scripts/jquery.js"></script>
    <script src="../demos/scripts/rainbow.js"></script>
    <script src="../lib/legacy.js"></script>
    <script src="../lib/pick.js"></script>

    <a href="../">home</a>
    <a href="../demos">demos</a>
    <a href="../docs">docs</a>
    <hr>

    
<section>
    <div class="div" data-value="006">Custom input picker</div>
</section>

<script>

    $.fn.pick.extend({
        name: 'pick--input-custom',
        formats: {
            dd: function( value ) {
                return '0' + value
            },
            ddd: function( value ) {
                return '00' + value
            }
        },
        defaults: {
            format: 'dd',
            formatHidden: 'ddd',
            suffixHidden: '_submit'
        },
        content: function() {
            var string = '<input class="input" type="text" name="value_input">'
            return '<p>' + string + '</p>'
        },
        init: function( formatValueHash ) {
            if ( 'ddd' in formatValueHash ) this.dict.select = ~~formatValueHash.ddd
        },
        ready: function() {

            var picker = this.picker

            picker.on( 'render', function() {
                picker.$input = picker.$root.find( 'input' ).first()
                picker.$host.trigger( 'change' )
            })

            picker.$host.on( 'change', function() {
                picker.$input[0].value = picker.get( 'select', { format: picker.settings.format } )
            })
        }
    })

    var $input = $( '.div' ).pick( 'pick--input-custom' )
    var picker = $input.pick( 'picker' )
    picker.open()

</script>


</body>

