---
layout: extension
extension_name: Input custom
---

<section>
    <div class="div" data-value="006">Custom input shadow</div>
</section>

<script>

    $.fn.shadow.extend({
        name: 'shadow--input-custom',
        formats: {
            dd: function( value ) {
                return '0' + value
            },
            ddd: function( value ) {
                return '00' + value
            }
        },
        defaults: {
            format: 'dd',
            formatHidden: 'ddd',
            suffixHidden: '_submit'
        },
        template: function() {
            var string = '<input class="input" type="text" name="value_input">'
            return '<p>' + string + '</p>'
        },
        init: function( formatValueHash ) {

            var ui = this.ui

            if ( 'ddd' in formatValueHash ) ui.set( 'select', ~~formatValueHash.ddd )

            ui.on( 'render', function() {
                ui.$input = ui.$root.find( 'input' ).first().on( 'blur', function() {
                    ui.set( 'select', ~~this.value )
                })
                ui.$host.trigger( 'change' )
            })

            ui.$host.on( 'change', function() {
                ui.$input[0].value = ui.get( 'select', { format: ui.settings.format } )
            })

            ui.on('set', function( event ) {
                if ( event.item == 'select' )
                    ui.$host.after( 'hidden value: ' + ui.get('valueHidden') + '<br>' )
            })
        }
    })

    var $input = $( '.div' ).shadow( 'shadow--input-custom' )
    var ui = $input.shadow( 'ui' )

</script>
