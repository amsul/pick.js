<!doctype html>

<meta charset="utf-8">



<link rel="stylesheet" href="../demos/styles/main.css">
<link rel="stylesheet" href="../lib/less/shadow.base.css">
<link rel="stylesheet" href="../lib/less/shadow.drop.css">
<link rel="stylesheet" href="../lib/less/shadow.modal.css">
<link rel="stylesheet" href="../lib/less/shadow.blob.css">

<body>

    <script src="../demos/scripts/jquery.js"></script>
    <script src="../demos/scripts/rainbow.js"></script>
    <script src="../lib/legacy.js"></script>
    <script src="../lib/shadow.js"></script>


    <header class="section">
        <div class="section__block section__block--scoped">
            <nav class="navigation navigation--header">
                <ul class="navigation__list">
                    <li class="navigation__item">
                        <a class="navigation__link" href="../">Home</a>
                    </li><!--
                 --><li class="navigation__item">
                        <a class="navigation__link" href="../demos">Demos</a>
                    </li><!--
                 --><li class="navigation__item">
                        <a class="navigation__link" href="../docs">Docs</a>
                    </li><!--
                 --><li class="navigation__item">
                        <a class="navigation__link" href="https://github.com/amsul/shadow-ui">Github</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>


    
<section>
    <div class="div">
        <h4>Multiple option dropdown</h4>
        <div class="outlet"></div>
    </div>
</section>

<script>

    function printSelections( selections, options, $host ) {
        $outlet = $host.children( '.outlet' ).detach().empty()
        selections.
            sort(function( a, b ) { return b > a ? -1 : 1 }).
            forEach(function( selection ) {
                $outlet.append( '&nbsp;<kbd>' + options[ selection ] + '</kbd>&nbsp;' )
            })
        $host.append( $outlet )
    }

    shadow.extend({
        name: 'dropdown',
        alias: 'dropdown',
        dict: {
            options: [ 'All', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten' ],
            select: [ 0, 3, 4, 5, 10 ]
        },
        init: function() {

            var ui = this.ui,
                dict = this.dict

            printSelections( dict.select, dict.options, ui.$host )

            ui.on( 'start', function() {

                ui.$root.on( 'change', function( event ) {
                    var value = ~~event.target.value
                    if ( event.target.checked ) ui.add( 'select', value )
                    else ui.remove( 'select', value )
                    printSelections( dict.select, dict.options, ui.$host )
                })
            })
        },
        template: function() {
            var selections = this.dict.select,
                options = this.dict.options
            return shadow._.node({
                el: 'ul',
                content: options.map( function( option, index ) {
                    var isSelected = selections.indexOf( index ) > -1
                    return shadow._.node({
                        el: 'li',
                        content: [
                            '<label>',
                                '<input value="' + index + '"' + (isSelected ? ' checked' : '') + ' type=checkbox>',
                                option,
                            '</label>'
                        ]
                    })
                })
            })
        }
    })

    var $div = $( '.div' ).dropdown()
    var ui = $div.dropdown( 'ui' )
    // ui.open(true)

</script>



</body>

